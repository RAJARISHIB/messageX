<div class="flex h-screen">
  <!-- Left Panel: Chat List -->
  <div class="w-80 bg-base-200 shadow-lg flex flex-col">
    <div class="p-4">
      <label class="input input-bordered flex items-center gap-2 rounded-xl shadow-sm">
        <input
          type="text"
          placeholder="Search chats..."
          class="grow bg-transparent focus:outline-none"
          [(ngModel)]="searchTerm"
          (ngModelChange)="onSearch($event)"
        />
      </label>
    </div>

    <div class="flex-1 overflow-y-auto px-2 pb-4">
      <div
        *ngFor="let chat of chats"
        class="flex items-center p-3 mb-2 bg-base-100 hover:bg-base-300 cursor-pointer rounded-2xl shadow-sm transition-all duration-200"
        (click)="selectChat(chat)"
      >
        <div class="text-base font-semibold text-white-800">{{ chat?.username }}</div>
      </div>
    </div>
  </div>

  <!-- Right Panel: Selected Chat -->
  <!-- Right Panel: Selected Chat -->
  <div class="flex-1 flex flex-col bg-base-100">
    <div *ngIf="selectedChat; else noChatSelected" class="flex-1 flex flex-col">
      <!-- Chat Header -->
      <div class="p-4 border-b border-gray-300 font-bold">
        {{ selectedChat.username }}
      </div>

      <!-- Chat Messages -->
      <div class="flex-1 overflow-y-auto p-4 space-y-2 chat-messages">
        <!-- Case 1: No messages yet -->
        <div *ngIf="messages.length === 0" class="flex h-full items-center justify-center">
          <div class="text-center">
            <div class="text-gray-400 text-lg font-medium">âœ¨ Start a conversation âœ¨</div>
            <div class="text-sm text-gray-500">Send a message to {{ selectedChat.username }}</div>
          </div>
        </div>

        <!-- Case 2: Messages exist -->
        <div
          *ngFor="let msg of messages"
          [ngClass]="{
            'text-right': msg.from === 'You',
            'text-left': msg.from !== 'You'
          }"
        >
          <span
            class="inline-block px-4 py-2 rounded-xl shadow-sm transition-all duration-200"
            [ngClass]="{
              'bg-blue-500 text-white': msg.from === 'You',
              'bg-gray-200 text-black': msg.from !== 'You'
            }"
          >
            {{ msg.message }}
          </span>
        </div>
      </div>

      <!-- Input Box -->
      <div class="p-4 border-t border-gray-300 flex gap-2">
        <input
          type="text"
          [(ngModel)]="messageText"
          placeholder="Type a message..."
          class="input input-bordered flex-1"
          (keydown.enter)="sendMessage()"
        />
        <button class="btn btn-primary" (click)="sendMessage()">Send</button>
      </div>
    </div>

    <!-- No Chat Selected -->
    <ng-template #noChatSelected>
      <div class="flex-1 flex items-center justify-center text-gray-400">
        <div class="text-center">
          <div class="text-2xl font-semibold mb-2">ðŸ’¬</div>
          <div class="text-lg">Select a chat to start messaging</div>
        </div>
      </div>
    </ng-template>
  </div>
</div>
